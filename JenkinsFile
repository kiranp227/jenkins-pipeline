pipeline {
    agent any
    tools {
        maven 'pipleine-maven'
    }
    stages {
        stage('checkout') {
            steps {
                 git credentialsId: 'Git-Credentials', url: 'https://github.com/kiranp227/game-of-life.git'
                 }
            }
        stage('build the app'){
            steps{
                sh 'mvn clean install'
                 }
            }
        stage('build docker image'){
            steps{
                sh 'cd gameoflife-web' 
                sh 'docker --tlsverify --tlscacert=/home/ubuntu/ca.pem --tlscert=/home/ubuntu/cert.pem --tlskey=/home/ubuntu/key.pem \
                -H=jenkins-slave:2376 build -t kiranp227/tomcat-pipeline:${BUILD_ID} .'
                }}
    }
 }
